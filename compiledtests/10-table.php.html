<html>
<head>
				<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
				<title>Table tests</title>
				</head>
				<body>
				<table cellpadding="1" cellspacing="1" border="1">
				<thead>
				<tr><td rowspan="1" colspan="3">Create tables, make some alterations...</td></tr>
				</thead><tbody><tr>
<th colspan="3">Login as janus</th>
</tr>
<tr>
<td>open</td>
<td>http://localhost:8800/ppa/intro.php</td>
<td></td>
</tr>
<tr>
<td>select</td>
<td>name=language</td>
<td>English</td>
</tr>
<tr>
<td>open</td>
<td>http://localhost:8800/ppa/login.php?server=localhost:5432:allow&subject=server</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>//input[@name='loginUsername']</td>
<td>admin_user</td>
</tr>
<tr>
<td>type</td>
<td>//input[@id='loginPassword']</td>
<td>super</td>
</tr>
<tr>
<td>clickAndWait</td>
<td>name=loginSubmit</td>
<td></td>
</tr>
<tr>
<td>assertText</td>
<td>//div[@class='topbar']/descendant::span[@class='username']</td>
<td>admin_user</td>
</tr>
<tr>
<th colspan="3">1. create a table student in public</th>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Databases</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=ppatests_db</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Schemas</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=public</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Tables</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Create table</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>name=name</td>
<td>student</td>
</tr>
<tr>
<td>type</td>
<td>name=fields</td>
<td>5</td>
</tr>
<tr>
<td>type</td>
<td>name=tblcomment</td>
<td>student table</td>
</tr>
<tr>
<td>clickAndWait</td>
<td>//input[@value='Next >']</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>name=field[0]</td>
<td>id</td>
</tr>
<tr>
<td>select</td>
<td>name=types0</td>
<td>label=SERIAL</td>
</tr>
<tr>
<td>click</td>
<td>name=primarykey[0]</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>name=field[1]</td>
<td>id_promo</td>
</tr>
<tr>
<td>select</td>
<td>name=types1</td>
<td>label=integer</td>
</tr>
<tr>
<td>type</td>
<td>name=field[2]</td>
<td>name</td>
</tr>
<tr>
<td>select</td>
<td>name=types2</td>
<td>label=character varying</td>
</tr>
<tr>
<td>type</td>
<td>name=lengths2</td>
<td>20</td>
</tr>
<tr>
<td>click</td>
<td>name=notnull[2]</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>name=field[3]</td>
<td>birthday</td>
</tr>
<tr>
<td>select</td>
<td>name=types3</td>
<td>label=date</td>
</tr>
<tr>
<td>type</td>
<td>name=field[4]</td>
<td>resume</td>
</tr>
<tr>
<td>select</td>
<td>name=types4</td>
<td>label=text</td>
</tr>
<tr>
<td>clickAndWait</td>
<td>//input[@value='Create']</td>
<td></td>
</tr>
<tr>
<td>assertText</td>
<td>//p[@class='message']</td>
<td>Table created.</td>
</tr>
<tr>
<th colspan="3">2. create table promo in test_schema</th>
</tr>
<tr>
<td>clickAndWait</td>
<td>//div[@class='trail']/descendant::a[@title='Database']/span[@class='label' and text()='ppatests_db']</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Schemas</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=test_schema</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Tables</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Create table</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>name=name</td>
<td>promo</td>
</tr>
<tr>
<td>type</td>
<td>name=fields</td>
<td>3</td>
</tr>
<tr>
<td>type</td>
<td>name=tblcomment</td>
<td>promotion's year & speciality</td>
</tr>
<tr>
<td>clickAndWait</td>
<td>//input[@value='Next &gt;']</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>name=field[0]</td>
<td>id</td>
</tr>
<tr>
<td>select</td>
<td>name=types0</td>
<td>label=SERIAL</td>
</tr>
<tr>
<td>click</td>
<td>name=primarykey[0]</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>name=field[1]</td>
<td>spe</td>
</tr>
<tr>
<td>select</td>
<td>name=types1</td>
<td>label=character varying</td>
</tr>
<tr>
<td>type</td>
<td>name=lengths1</td>
<td>20</td>
</tr>
<tr>
<td>click</td>
<td>name=notnull[1]</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>name=field[2]</td>
<td>year</td>
</tr>
<tr>
<td>select</td>
<td>name=types2</td>
<td>label=regexp:"?year"?</td>
</tr>
<tr>
<td>click</td>
<td>name=notnull[2]</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>//input[@value='Create']</td>
<td></td>
</tr>
<tr>
<td>assertText</td>
<td>//p[@class='message']</td>
<td>Table created.</td>
</tr>
<tr>
<th colspan="3">3. create table like student in test_schema</th>
</tr>
<tr>
<td>clickAndWait</td>
<td>//div[@class='trail']/descendant::a[@title='Database']/span[@class='label' and text()='ppatests_db']</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Schemas</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=test_schema</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Tables</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Create table like</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>name=name</td>
<td>test_toalter</td>
</tr>
<tr>
<td>select</td>
<td>name=like</td>
<td>label="public"."student"</td>
</tr>
<tr>
<td>click</td>
<td>name=withdefaults</td>
<td></td>
</tr>
<tr>
<td>click</td>
<td>name=withconstraints</td>
<td></td>
</tr>
<tr>
<td>click</td>
<td>name=withindexes</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>//input[@value='Create']</td>
<td></td>
</tr>
<tr>
<td>assertText</td>
<td>//p[@class='message']</td>
<td>Table created.</td>
</tr>
<tr>
<th colspan="3">4. alter each param one by one on test_toalter</th>
</tr>
<tr>
<th colspan="3">4.1. alter table name</th>
</tr>
<tr>
<td>clickAndWait</td>
<td>//div[@class='trail']/descendant::a[@title='Database']/span[@class='label' and text()='ppatests_db']</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Schemas</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=test_schema</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Tables</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=test_toalter</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Columns</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>//ul[@class='navlink']/li/a[text()='Alter']</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>name=name</td>
<td>test_renamed</td>
</tr>
<tr>
<td>clickAndWait</td>
<td>name=alter</td>
<td></td>
</tr>
<tr>
<td>assertText</td>
<td>//p[@class='message']</td>
<td>Table altered.</td>
</tr>
<tr>
<td>assertText</td>
<td>//div[@class='trail']/descendant::a[@title='Table']/span[@class='label']</td>
<td>test_renamed</td>
</tr>
<tr>
<th colspan="3">4.2. alter table comment</th>
</tr>
<tr>
<td>clickAndWait</td>
<td>//div[@class='trail']/descendant::a[@title='Database']/span[@class='label' and text()='ppatests_db']</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Schemas</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=test_schema</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Tables</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=test_renamed</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Columns</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>//ul[@class='navlink']/li/a[text()='Alter']</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>name=comment</td>
<td>altered comment</td>
</tr>
<tr>
<td>clickAndWait</td>
<td>name=alter</td>
<td></td>
</tr>
<tr>
<td>assertText</td>
<td>//p[@class='message']</td>
<td>Table altered.</td>
</tr>
<tr>
<td>assertText</td>
<td>//p[@class='comment']</td>
<td>altered comment</td>
</tr>
<tr>
<th colspan="3">4.3. alter table owner</th>
</tr>
<tr>
<td>clickAndWait</td>
<td>//div[@class='trail']/descendant::a[@title='Database']/span[@class='label' and text()='ppatests_db']</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Schemas</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=test_schema</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Tables</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>//tr/td/a[text()='test_renamed']/../../td/a[text()='Alter']</td>
<td></td>
</tr>
<tr>
<td>select</td>
<td>name=owner</td>
<td>label=ppa_tests_user</td>
</tr>
<tr>
<td>clickAndWait</td>
<td>name=alter</td>
<td></td>
</tr>
<tr>
<td>assertText</td>
<td>//p[@class='message']</td>
<td>Table altered.</td>
</tr>
<tr>
<td>clickAndWait</td>
<td>//div[@class='trail']/descendant::a[@title='Schema']/span[@class='label' and text()='test_schema']</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Tables</td>
<td></td>
</tr>
<tr>
<td>assertText</td>
<td>//tr/td[2]/a[text()='test_renamed']/../../td[3]</td>
<td>ppa_tests_user</td>
</tr>
<tr>
<th colspan="3">4.4. alter table schema</th>
</tr>
<tr>
<td>clickAndWait</td>
<td>//div[@class='trail']/descendant::a[@title='Database']/span[@class='label' and text()='ppatests_db']</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Schemas</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=test_schema</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Tables</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>//tr/td/a[text()='test_renamed']/../../td/a[text()='Alter']</td>
<td></td>
</tr>
<tr>
<td>select</td>
<td>name=newschema</td>
<td>label=public</td>
</tr>
<tr>
<td>clickAndWait</td>
<td>name=alter</td>
<td></td>
</tr>
<tr>
<td>assertText</td>
<td>//p[@class='message']</td>
<td>Table altered.</td>
</tr>
<tr>
<td>assertText</td>
<td>//div[@class='trail']/descendant::a[@title='Schema']/span[@class='label']</td>
<td>public</td>
</tr>
<tr>
<th colspan="3">5. alter back test_toalter in one step</th>
</tr>
<tr>
<td>clickAndWait</td>
<td>//div[@class='trail']/descendant::a[@title='Database']/span[@class='label' and text()='ppatests_db']</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Schemas</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=public</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Tables</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=test_renamed</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Columns</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>//ul[@class='navlink']/li/a[text()='Alter']</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>name=name</td>
<td>test</td>
</tr>
<tr>
<td>type</td>
<td>name=comment</td>
<td>normal comment</td>
</tr>
<tr>
<td>select</td>
<td>name=newschema</td>
<td>label=test_schema</td>
</tr>
<tr>
<td>select</td>
<td>name=owner</td>
<td>label=admin_user</td>
</tr>
<tr>
<td>clickAndWait</td>
<td>name=alter</td>
<td></td>
</tr>
<tr>
<td>assertText</td>
<td>//p[@class='message']</td>
<td>Table altered.</td>
</tr>
<tr>
<td>assertText</td>
<td>//div[@class='trail']/descendant::a[@title='Table']/span[@class='label']</td>
<td>test</td>
</tr>
<tr>
<td>assertText</td>
<td>//p[@class='comment']</td>
<td>normal comment</td>
</tr>
<tr>
<td>assertText</td>
<td>//div[@class='trail']/descendant::a[@title='Schema']/span[@class='label']</td>
<td>test_schema</td>
</tr>
<tr>
<td>clickAndWait</td>
<td>//div[@class='trail']/descendant::a[@title='Schema']/span[@class='label' and text()='test_schema']</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Tables</td>
<td></td>
</tr>
<tr>
<td>assertText</td>
<td>//tr/td[2]/a[text()='test']/../../td[3]</td>
<td>admin_user</td>
</tr>
<tr>
<th colspan="3">Logout</th>
</tr>
<tr>
<td>clickAndWait</td>
<td>//div[@class='trail']/descendant::tr/td[1]/a/span[@class='label' and text()='phpPgAdmin']</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>link=Servers</td>
<td></td>
</tr>
<tr>
<td>clickAndWait</td>
<td>//tr/td/a[text()='PostgreSQL']/../../td/a[text()='Logout']</td>
<td></td>
</tr>
<tr>
<td>assertText</td>
<td>//p[@class='message']</td>
<td>Logged out of PostgreSQL</td>
</tr>
